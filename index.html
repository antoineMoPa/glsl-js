<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VolumeGif</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="js/lib/codemirror/codemirror.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div class="page-content">
      <canvas class="result-canvas"></canvas>

      <br>
      <col-md-6>
        <h3>Fragment Shader</h3>
     <textarea name='fragment'>
// Fragment shader
precision highp float;

varying vec3 pos;
uniform float time;
uniform float ratio;
uniform vec2 mouse;

#define PI 3.14159265359
#define PI2 6.28318530718

vec4 object(vec3 pos){
	
    float func = 0.1 *
        sin(
            50.0 *
            sqrt(
                pow(pos.x, 2.0) + pow(pos.z, 2.0)
                ) - time * PI2) - 2.0;
    
    if(pos.y < func){
    	return vec4(1.0);
    }
    
    return vec4(0.0);
}

vec4 scene(vec3 pos){
	
    pos.y *= 4.0;

    pos.xy *= 1.0 + 0.9 * pos.z;
   	
    return object(pos);
}

void main(void){
    vec4 col = vec4(0.0);
	
    col += scene(pos);
    
    col.a = 1.0;
    
    gl_FragColor = 0.01 * col;
}    
     </textarea>

        <pre class="fragment-error-pre error-pre">
        </pre>
        
        <pre class="vertex-error-pre error-pre">
        </pre>
        
      </col-md-6>
      <col-md-6 class="sticky-column">
        
        <div class="text-center">
          <h3>Gif preview</h3>
        </div>
        
        <canvas class="gif-canvas"></canvas>

        <button name="make-gif">
          Make a gif from this
        </button>
                
      </col-md-6>
      
      <clearfix></clearfix>
      
      <col-md-6>
        <div class="text-center">
          <h3>Gifs will appear here (below)</h3>
          <p>
            (be patient and open console to see messages)<br>
            Due to compression by gif.js, result may appear weird to you (or fancier?).
          </p>
        </div>
        
        <div class="result-images">
          <span></span>
        </div>
      </col-md-6>
      <script name="vertex-shader" type="text/plain">
// Vertex Shader
attribute vec3 position;
varying vec3 pos;
uniform float time;

void main(){
    pos = position;
    
    gl_Position = vec4(pos.x, pos.y, pos.z, 1.0);
}
      </script>
      
      <script src="js/lib/codemirror/codemirror.js"></script>
      <script src="js/lib/base.js"></script>
      <script src="gif-export/lib/gifjs/gif.js"></script>
      <script src="js/shadergif.js"></script>
  </body>
</html>
