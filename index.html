<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>ShaderGif</title>
		<link rel="stylesheet" href="js/lib/codemirror/lib/codemirror.css?version=1">
		<link rel="stylesheet" href="js/lib/codemirror/addon/dialog/dialog.css?version=1">
		<link rel="stylesheet" href="js/lib/codemirror/addon/search/matchesonscrollbar.css?version=1">
		<link rel="stylesheet" href="css/base.css?version=1">
		<link rel="stylesheet" href="css/style.css?version=1">
	</head>
	<body>
		<header>
            <h1><a href="https://a-mo-pa.com/stuff/shadergif/">ShaderGif</a></h1>
            <a href="examples.html">Examples</a>
		</header>
		<div id="shadergif-app" class="page-content vertical-scroll-parent">
			<col-md-6 class="vertical-clip">
			  <textarea name='fragment' v-model="code">
			  </textarea>
			</col-md-6>
			<col-md-6 class="vertical-scroll">
				<div class="text-center">
					<h3>Gif preview</h3>
				</div>
				<canvas class="gif-canvas"></canvas>
                
                <pre class="fragment-error-pre error-pre">
				</pre>
				<pre class="vertex-error-pre error-pre">
				</pre>

				<div class="text-center">
					<button name="make-gif" class="inline-block">
						Create gif
					</button>
					
					<button name="make-png" class="inline-block">
						Create stacked png
					</button>
					
					<div class="settings inline-block">
						w:<input type="number" v-model.lazy="width">
						h:<input type="number" v-model.lazy="height">
					</div>

				</div>
				<div class="text-center">
				    <div class="settings inline-block">
				      frames:<input type="number" v-model.lazy="frames">
					</div>
				</div>
				<hr>
				
				<div class="text-center">
					<h3>Gifs results</h3>
				</div>
				
				<div class="result-images">
					<span></span>
				</div>
				
				
				<div class="text-left">
					<p>
						For pngs, on Linux, you can split the result like this:
						<pre>convert image.png -crop {{width}}x{{height}} +repage image-%04d.png</pre>
					</p>
					<p>
						And then make gifs:
					</p>
					<pre>convert image-*.png anim.gif</pre>
				</div>
			</col-md-6>
		</div>	
		<script name="default-fragment-shader" type="text/plain">// Fragment shader
precision highp float;
				
#define PI 3.14159265359
#define PI2 6.28318530718

varying vec2 UV;
varying vec3 v_position;
uniform float time;
uniform float ratio;

void main(void){
	float x = UV.x * ratio - 0.5;
	float y = UV.y - 0.5;
	vec2 pos = vec2(x, y); 
	
	vec4 col = vec4(0.0);
	
	col.r = abs(sin(30.0 * y + 3.1416 * time + 0.3));
	col.b = abs(sin(30.0 * y + 3.1416 * time + 0.5));
	col.b = abs(sin(30.0 * y + 3.1416 * time + 1.0));
	col *= cos(30.0 * x);
	col.a = 1.0;
	
	gl_FragColor = col;
}</script>
		<script name="vertex-shader" type="text/plain">
// Vertex Shader
attribute vec3 position;
varying vec2 UV;
varying vec3 v_position;
uniform float time;

void main(){
	v_position = position;
	UV = vec2((position.x+1.0) / 2.0, (position.y + 1.0)/2.0);
	gl_Position = vec4(v_position.x,v_position.y, 0.0, 1.0);
}
		</script>


		<script src="js/lib/codemirror/lib/codemirror.js?version=1"></script>
		<script src="js/lib/codemirror/addon/dialog/dialog.js?version=1"></script>
		<script src="js/lib/codemirror/addon/search/searchcursor.js?version=1"></script>
		<script src="js/lib/codemirror/addon/search/search.js?version=1"></script>
		<script src="js/lib/codemirror/addon/scroll/annotatescrollbar.js?version=1"></script>
		<script src="js/lib/codemirror/addon/search/matchesonscrollbar.js?version=1"></script>
		
		<script src="js/lib/codemirror-webgl-clike.js?version=1"></script>
		
		<script src="js/lib/vue.min.js?version=1"></script>
		<script src="js/lib/base.js?version=1"></script>
		<script src="gif-export/lib/gifjs/gif.js?version=1"></script>
		<script src="js/shadergif.js?version=1"></script>
	</body>
</html>
